{"version":3,"file":"lrseo_allposts-BT9futQ5.js","sources":["../../src/js/admin.ajax.allposts.js"],"sourcesContent":["import { Store } from './admin.cache';\nimport { checkLrseoAdminPage } from './admin.check_lrseo_page';\n\njQuery(document).ready(function ($) {\n    const searchInput = $('#lrseo_search_post');\n    searchInput.val(Store.get('lrseo_search_post'));\n    searchInput.on('keyup', function () {\n        const value = $(this).val().toLowerCase();\n        $('#lrseo_allposts_tbody tr').filter(function () {\n            $(this).toggle($(this).text().toLowerCase().indexOf(value) > -1);\n        });\n    });\n    searchInput.on('blur', function () {\n        console.log($(this).val());\n        Store.store($(this).val(), 'lrseo_search_post', 10);\n    });\n\n    const data = { action: 'lrseo_allposts', security: lrseo_allposts.nonce };\n    // On vÃ©rifie qu'on est sur la page adu plugin\n    if (!checkLrseoAdminPage()) {\n        return;\n    }\n\n    if (Store.get('lrseo_allposts') === null) {\n        $.post(lrseo_allposts.url, data, (response) => {\n            if (response.success) {\n                Store.store(response.data, 'lrseo_allposts', 10);\n                displaySelectPosts();\n            }\n        });\n    } else {\n        displaySelectPosts();\n    }\n\n    function displaySelectPosts() {\n        let posts = Store.get('lrseo_allposts');\n        let query = new URLSearchParams(window.location.search);\n        let post_id = query.get('lrseo_inbound_post_select');\n        if (posts) {\n            const rows = posts\n                .map(\n                    (post) =>\n                        `<tr data-title=\"${post.post_title}\" data-id=\"${post.ID}\" class=\"${\n                            parseInt(post_id, 10) === parseInt(post.ID, 10) && '!lr-bg-amber-100'\n                        }\">\n                    <td>${\n                        parseInt(post_id, 10) === parseInt(post.ID, 10)\n                            ? ''\n                            : `<a href=\"${window.location}&lrseo_inbound_post_select=${post.ID}\">Choisir</a>`\n                    }</td>\n                    <td class=\"title has-row-actions column-title column-primary lr-max-w-[800px] lr-overflow-y-scroll\">\n                        <strong>${post.post_title}</strong>\n                    </td>\n                    <td>${post.outbound_links?.length}</td>\n                    <td>${post.inbound_links?.length}</td>\n                    <td>${post.words}</td>\n                </tr>`\n                )\n                .join('');\n\n            $('#lrseo_allposts_tbody').html(rows);\n            $('#lrseo_allposts_table').removeClass('lr-hidden');\n            $('.lrseo_status').addClass('lr-hidden');\n\n            const searchValue = Store.get('lrseo_search_post');\n            $('#lrseo_allposts_tbody tr').filter(function () {\n                if (!searchValue || searchValue === '') {\n                    return true;\n                }\n                $(this).toggle($(this).text().toLowerCase().indexOf(searchValue) > -1);\n            });\n        }\n    }\n});\n"],"names":["$","searchInput","Store","value","data","checkLrseoAdminPage","response","displaySelectPosts","posts","post_id","rows","post","_a","_b","searchValue"],"mappings":"gEAGA,OAAO,QAAQ,EAAE,MAAM,SAAUA,EAAG,CAChC,MAAMC,EAAcD,EAAE,oBAAoB,EAC1CC,EAAY,IAAIC,EAAM,IAAI,mBAAmB,CAAC,EAC9CD,EAAY,GAAG,QAAS,UAAY,CAChC,MAAME,EAAQH,EAAE,IAAI,EAAE,IAAG,EAAG,YAAa,EACzCA,EAAE,0BAA0B,EAAE,OAAO,UAAY,CAC7CA,EAAE,IAAI,EAAE,OAAOA,EAAE,IAAI,EAAE,KAAM,EAAC,YAAW,EAAG,QAAQG,CAAK,EAAI,EAAE,CAC3E,CAAS,CACT,CAAK,EACDF,EAAY,GAAG,OAAQ,UAAY,CAC/B,QAAQ,IAAID,EAAE,IAAI,EAAE,IAAG,CAAE,EACzBE,EAAM,MAAMF,EAAE,IAAI,EAAE,IAAK,EAAE,oBAAqB,EAAE,CAC1D,CAAK,EAED,MAAMI,EAAO,CAAE,OAAQ,iBAAkB,SAAU,eAAe,KAAO,EAEzE,GAAI,CAACC,EAAmB,EACpB,OAGAH,EAAM,IAAI,gBAAgB,IAAM,KAChCF,EAAE,KAAK,eAAe,IAAKI,EAAOE,GAAa,CACvCA,EAAS,UACTJ,EAAM,MAAMI,EAAS,KAAM,iBAAkB,EAAE,EAC/CC,EAAoB,EAEpC,CAAS,EAEDA,EAAoB,EAGxB,SAASA,GAAqB,CAC1B,IAAIC,EAAQN,EAAM,IAAI,gBAAgB,EAElCO,EADQ,IAAI,gBAAgB,OAAO,SAAS,MAAM,EAClC,IAAI,2BAA2B,EACnD,GAAID,EAAO,CACP,MAAME,EAAOF,EACR,IACIG,GAAI,SACD,yBAAmBA,EAAK,UAAU,cAAcA,EAAK,EAAE,YACnD,SAASF,EAAS,EAAE,IAAM,SAASE,EAAK,GAAI,EAAE,GAAK,kBACtD;AAAA,0BAED,SAASF,EAAS,EAAE,IAAM,SAASE,EAAK,GAAI,EAAE,EACxC,GACA,YAAY,OAAO,QAAQ,8BAA8BA,EAAK,EAAE,eACzE;AAAA;AAAA,kCAEaA,EAAK,UAAU;AAAA;AAAA,2BAEvBC,EAAAD,EAAK,iBAAL,YAAAC,EAAqB,MAAM;AAAA,2BAC3BC,EAAAF,EAAK,gBAAL,YAAAE,EAAoB,MAAM;AAAA,0BAC1BF,EAAK,KAAK;AAAA,uBAEpC,EACiB,KAAK,EAAE,EAEZX,EAAE,uBAAuB,EAAE,KAAKU,CAAI,EACpCV,EAAE,uBAAuB,EAAE,YAAY,WAAW,EAClDA,EAAE,eAAe,EAAE,SAAS,WAAW,EAEvC,MAAMc,EAAcZ,EAAM,IAAI,mBAAmB,EACjDF,EAAE,0BAA0B,EAAE,OAAO,UAAY,CAC7C,GAAI,CAACc,GAAeA,IAAgB,GAChC,MAAO,GAEXd,EAAE,IAAI,EAAE,OAAOA,EAAE,IAAI,EAAE,KAAM,EAAC,YAAW,EAAG,QAAQc,CAAW,EAAI,EAAE,CACrF,CAAa,CACb,CACA,CACA,CAAC"}